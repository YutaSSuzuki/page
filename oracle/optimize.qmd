---
title: "オプティマイザ"
format: html
---

## オプティマイザの概要
オプティマイザ統計はデータベースに格納されたデータの状態を示すサマリ情報で、統計情報とも呼ばれる。<br>
この情報は実行計画の作成に必要となる。<br>
この情報は自動で収集される場合と手動で収集される場合がある。<br>
統計情報を正しく更新しないと、最適な実行計画が立案されないためパフォーマンスの低下につながる。<br>
しかし更新も無駄に行うとパフォーマンスの低下につながるため、システムの特性から最適な頻度を選ぶ必要がある。

## オプティマイザ統計の中身

* テーブルレベルの統計
  * 行数
  * ブロッk数う
  * 空きスペース
* カラムレベルの統計
  * データ分布
  * NULL値の割合
  * ヒストグラム
* インデックス統計
  * インデックスの行数
  * クラスタリング因子
  * 選択制

## オプティマイザ統計の収集

ある時間や更新時などに自動で更新される自動更新と、任意のタイミングで行う手動更新がある。<br>

Oracleの手動更新は以下のコマンドで行える。
``` sql
   DBMS_STATS.GATHER_TABLE_STATS('SCHEMA_NAME', 'TABLE_NAME');
```

インデックスを作成した場合、データの大幅な変更があった場合は更新を行う必要がある。<br>
